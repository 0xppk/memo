<template >
    <div class="back" :class="{ curtain:!ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ || ì•”ì „ }"></div>
    <div id="wrap">

        <!-- ëª¨ë‹¬ì°½ UI -->
        <Modal
            :ì‚­ì œì¸ë±ìŠ¤="ì‚­ì œì¸ë±ìŠ¤"
            :ëª¨ë‹¬ë„ì›€="ëª¨ë‹¬ë„ì›€"
            @ëª¨ë‹¬ì°½ë‹«ì•„ì¤˜="ëª¨ë‹¬ì°½ë‹«ê¸°"
            @ì‚­ì œí•´ì¤˜="ì‚­ì œí™•ì¸ë²„íŠ¼(ì‚­ì œì¸ë±ìŠ¤)"
            @ë¦¬ì…‹í•´ì¤˜="ë¦¬ì…‹í™•ì¸ë²„íŠ¼"
        />

        <!-- ë¡œê·¸ì¸ UI -->
        <Login
            :ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§="ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§"
            @ì¸ì‚¬ë§="ë‹‰ë„¤ì„ê²½ê³ "
            @ë‹‰ë„¤ì„ë³€ê²½="ë‹‰ë„¤ì„ì¶”ê°€($event)"
        />

        <!-- ìˆ¨ê¹€ë°” -->
        <Sidebar
            :ë‹‰ë„¤ì„ì¸í’‹="ë‹‰ë„¤ì„ì¸í’‹"
            :ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§="ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§"
            :ì¸ì‚¬ë§ì‹œì‘="ì¸ì‚¬ë§ì‹œì‘"
            :ì‹œê³„ì‚¬ë¼ì§="ì‹œê³„ì‚¬ë¼ì§"
            :í• ì¼ì•Œë¦¼="í• ì¼ì•Œë¦¼"
            :í• ì¼="í• ì¼"
            :ì•”ì „="ì•”ì „"
            @í• ì¼ì‚­ì œ="í• ì¼ì‚­ì œë²„íŠ¼($event)"
            @ì´ˆê¸°í™”="ëª¨ë‹¬ì°½ì—´ê¸°"
            @ì •ë ¬="ì—­ìˆœì •ë ¬"
        />

        <!-- ë‹¤í¬ëª¨ë“œ ìŠ¤ìœ„ì¹˜ -->
        <DarkMode />

        <!-- ë©”ëª¨ ë³´ë“œ -->
        <Memo
            :ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§="ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§"
            :ì•”ì „="ì•”ì „"
            :ë©”ëª¨="ë©”ëª¨"
            :í• ì¼="í• ì¼"
            @ë©”ëª¨ì…ë ¥="ë©”ëª¨ì¸í’‹ = $event"
            @ë©”ëª¨ì¶”ê°€="ë©”ëª¨ì¶”ê°€"
            @í• ì¼="í• ì¼ì¶”ê°€"
            @ì œëª©ìˆ˜ì •="ì œëª©ìˆ˜ì •($event)"
            @ë‚´ìš©ìˆ˜ì •="ë‚´ìš©ìˆ˜ì •($event)"
            @ë©”ëª¨ì‚­ì œ="
                ëª¨ë‹¬ì°½ì—´ê¸°($event);
                ì‚­ì œì¸ë±ìŠ¤ = $event
            "
            @ì•”ì „="ì•”ì „=true"
            @ì•”ì „ë„ê¸°="ì•”ì „=false"
        />
    </div>
</template>
<script>
// # Import êµ¬ì—­
import Sidebar from "./Sidebar.vue";
import Modal from "./Modal.vue";
import DarkMode from "./DarkMode.vue";
import Login from "./Login.vue";
import Memo from "./Memo.vue";

// # export êµ¬ì—­
export default {
    name: "Main",
    components: {
        Sidebar,
        Modal,
        DarkMode,
        Login,
        Memo,
    },

    data() {  /* ë°ì´í„° ì‹œì‘ë¼ìš” */
        return {
            ë‹‰ë„¤ì„ì¸í’‹: "",
            ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§: false,
            ì¸ì‚¬ë§ì‹œì‘: false,
            ë©”ëª¨ì¸í’‹: "",
            ë©”ëª¨: { ë‚´ìš©:['1. ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ì„œ ë°”ë¡œ ìˆ˜ì •í•˜ì„¸ìš”\n2. ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤'], ì œëª©: ['ì œëª©ì€ ì—¬ê¸°ì—'] },
            í• ì¼: {
                ë‚´ìš©: [
                    "í´ë¦­í•˜ë©´ ì¤„ì´ ê·¸ì–´ì ¸ìš”",
                    "ë¸Œë¼ìš°ì €ë¥¼ ë‹«ì•„ë„ ë‚´ìš©ì´ ìœ ì§€ë¼ìš”",
                    "ì‚­ì œëŠ” ìˆ«ìë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”",
                ],
                í• ì¼ìŠ¤ìœ„ì¹˜: [0, 0, 0],
                ë¼ì¸ì“°ë£¨: [],
            },
            ì‚­ì œì¸ë±ìŠ¤: null,
            í• ì¼ì•Œë¦¼: false,
            ì‹œê³„ì‚¬ë¼ì§: false,
            ì•”ì „: false,
            ëª¨ë‹¬ë„ì›€: false,
        };
    } /* ë°ì´í„° ëë‚˜ìš” */,

    methods: {  /* ë©”ì˜ë“œ ì‹œì‘ë¼ìš” */
        // # ë²„íŠ¼ í•¨ìˆ˜
        ë‹‰ë„¤ì„ì¶”ê°€(e) {
            this.ë‹‰ë„¤ì„ì¸í’‹ = e;
            localStorage.setItem("name", this.ë‹‰ë„¤ì„ì¸í’‹);
        },
        ë‹‰ë„¤ì„ê²½ê³ () {
            if (this.ë‹‰ë„¤ì„ì¸í’‹ !== "") {
                this.ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ = true;
                this.ì¸ì‚¬ë§ì‹œì‘ = true;
            } else {
                alert("ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ’©ğŸ¤–");
            }
        },
        ë©”ëª¨ì¶”ê°€() {
            if (this.ë©”ëª¨ì¸í’‹ !== "") {
                this.ë©”ëª¨.ë‚´ìš©.push(this.ë©”ëª¨ì¸í’‹);
                this.ë©”ëª¨.ì œëª©.push('');
                this.ë©”ëª¨ì¸í’‹ = "";
                this.ë©”ëª¨ìŠ¤í† ë¦¬ì§€ì €ì¥();
            } else {
                alert("ê¸€ì¨ ì§œì‰­ì•„");
            }
        },
        í• ì¼ì¶”ê°€() {
            if (this.ë©”ëª¨ì¸í’‹ !== "") {
                this.í• ì¼.ë‚´ìš©.push(this.ë©”ëª¨ì¸í’‹);
                this.í• ì¼.í• ì¼ìŠ¤ìœ„ì¹˜.push(0);
                this.í• ì¼.ë¼ì¸ì“°ë£¨.push("none");
                this.í• ì¼ì•Œë¦¼ = true;
                this.ë©”ëª¨ì¸í’‹ = "";
                this.íˆ¬ë‘ìŠ¤í† ë¦¬ì§€ì €ì¥();
            } else {
                alert("ê¸€ ë‚¨ê²¨");
            }
        },
        ì‚­ì œí™•ì¸ë²„íŠ¼(i) {
            this.ë©”ëª¨.ë‚´ìš©.splice(i, 1);
            this.ë©”ëª¨.ì œëª©.splice(i, 1);
            localStorage.setItem("memo", JSON.stringify(this.ë©”ëª¨.ë‚´ìš©));
            localStorage.setItem("title", JSON.stringify(this.ë©”ëª¨.ì œëª©));
            document.querySelector("#send").disabled = true;
            this.ëª¨ë‹¬ì°½ë‹«ê¸°();
        },
        í• ì¼ì‚­ì œë²„íŠ¼(êµ³) {
            this.í• ì¼.ë‚´ìš©.splice(êµ³, 1);
            this.í• ì¼.í• ì¼ìŠ¤ìœ„ì¹˜.splice(êµ³, 1);
            this.í• ì¼.ë¼ì¸ì“°ë£¨.splice(êµ³, 1);
            localStorage.setItem("todo", JSON.stringify(this.í• ì¼.ë‚´ìš©));
            localStorage.setItem("todoSwitch", JSON.stringify(this.í• ì¼.í• ì¼ìŠ¤ìœ„ì¹˜));
            localStorage.setItem("lineThrough", JSON.stringify(this.í• ì¼.ë¼ì¸ì“°ë£¨));
        },
        ë¦¬ì…‹í™•ì¸ë²„íŠ¼() {
            this.ëª¨ë‹¬ì°½ë‹«ê¸°();
            this.ë©”ëª¨.ë‚´ìš© = [];
            this.ë©”ëª¨.ì œëª© = [];
            this.í• ì¼.ë‚´ìš© = [];
            this.í• ì¼.í• ì¼ìŠ¤ìœ„ì¹˜ = [];
            this.í• ì¼.ë¼ì¸ì“°ë£¨ = [];
            this.ë‹‰ë„¤ì„ì¸í’‹ = "";
            this.ì¸ì‚¬ë§ì‹œì‘ = false,
            this.ì‹œê³„ì‚¬ë¼ì§ = false,
            this.ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ = false,
            this.ìŠ¤í† ë¦¬ì§€ë¦¬ì…‹();
        },
        ì œëª©ìˆ˜ì •(i) {
            // Fixme: ê²°ê³¼ëŠ” ì œëŒ€ë¡œ ì¶œë ¥ë˜ë‚˜ eventê°€ ì •í™•í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì…ë ¥ë°›ì€ ê²ƒì´ ì•„ë‹ˆë¼ ì·¨ì†Œì„ ì´ ê·¸ì¸ë‹¤.
            // Fixme: í•¸ë“¤ëŸ¬ ì•ˆì— eventë¥¼ ë„£ì„ ìˆ˜ê°€ ì—†ë‹¤. ë¨¸ë¦¬ë¡œëŠ” ë˜ëŠ”ë° ì—¬ëŸ¬ ìˆ˜ ë„£ì–´ë´ë„ ìê¾¸ ì—‰í‚´. ë‹¤ìˆ˜ì˜ Payloadë¥¼ ì‹£ëŠ” ë‚´ ê³¼ì •ì— ë¬¸ì œê°€ ìˆëŠ” ë“¯í•˜ë‹¤ã…œ 
            this.ë©”ëª¨.ì œëª©.splice(i, 1, event.target.value);
            localStorage.setItem("title", JSON.stringify(this.ë©”ëª¨.ì œëª©));
        },
        ë‚´ìš©ìˆ˜ì •(ìˆ˜ì •ë ) {
            // Fixme: ë¯¸ë´‰ì±… => Payloadë“¤ì„ ì˜¤ë¸Œì íŠ¸ í•˜ë‚˜ë¡œ ë¬¶ì–´ ê°’ì„ ê°€ì ¸ì™”ë‹¤. ì˜ ë˜ê³ , ë” í¸í•œ ê²ƒë„ ê°™ì§€ë§Œ...
            this.ë©”ëª¨.ë‚´ìš©.splice(ìˆ˜ì •ë .ì¸ë±ìŠ¤, 1, ìˆ˜ì •ë .ë‚´ìš©);
            localStorage.setItem("memo", JSON.stringify(this.ë©”ëª¨.ë‚´ìš©));
        },

        // # ëª¨ë‹¬ì°½ í•¨ìˆ˜
        ëª¨ë‹¬ì°½ì—´ê¸°() {
            this.ëª¨ë‹¬ë„ì›€ = true;
        },
        ëª¨ë‹¬ì°½ë‹«ê¸°() {
            this.ëª¨ë‹¬ë„ì›€ = false;
            setTimeout(() => {
                this.ì‚­ì œì¸ë±ìŠ¤ = null;
            }, 400);
        },

        // # í•„í„° í•¨ìˆ˜
        ì—­ìˆœì •ë ¬() {
            this.ë©”ëª¨.ë‚´ìš©.reverse();
            this.ë©”ëª¨.ì œëª©.reverse();
            this.ë©”ëª¨ìŠ¤í† ë¦¬ì§€ì €ì¥();
        },

        // # ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í•¨ìˆ˜
        ë©”ëª¨ìŠ¤í† ë¦¬ì§€ì €ì¥() {
            var ì„ì‹œì €ì¥ì†Œ = JSON.stringify(this.ë©”ëª¨.ë‚´ìš©);
            localStorage.setItem("memo", ì„ì‹œì €ì¥ì†Œ);
            localStorage.setItem("title", JSON.stringify(this.ë©”ëª¨.ì œëª©));
        },
        íˆ¬ë‘ìŠ¤í† ë¦¬ì§€ì €ì¥() {
            localStorage.setItem("todo", JSON.stringify(this.í• ì¼.ë‚´ìš©));
            localStorage.setItem("todoSwitch", JSON.stringify(this.í• ì¼.í• ì¼ìŠ¤ìœ„ì¹˜));
        },
        ìŠ¤í† ë¦¬ì§€ë¦¬ì…‹() {
            localStorage.clear();
        },
    } /* ë©”ì˜ë“œ ëë‚˜ìš” */,

    mounted() {  /* ë§ˆìš´í‹°ë“œ ì‹œì‘ë¼ìš” */
        // ì¬ì ‘í•  ë•Œë§ˆë‹¤ ë¡œì»¬ìŠ¤íŠ¸ë¦¬ì§€ì˜ ë°ì´í„°ë¥¼ ë‚´ ë°ì´í„° í†µìœ¼ë¡œ ê°€ì ¸ì˜´ (ë™ê¸°í™”)
        if (typeof localStorage.name !== "undefined") {
            this.ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ = true;
            this.ì¸ì‚¬ë§ì‹œì‘ = true;
            this.ë‹‰ë„¤ì„ì¸í’‹ = localStorage.getItem("name");
        }
        if (typeof localStorage.memo !== "undefined") {
            this.ë©”ëª¨.ë‚´ìš© = JSON.parse(localStorage.getItem("memo"));
        }
        if (typeof localStorage.title !== "undefined") {
            this.ë©”ëª¨.ì œëª© = JSON.parse(localStorage.getItem("title"));
        }
        if (typeof localStorage.todo !== "undefined") {
            this.í• ì¼.ë‚´ìš© = JSON.parse(localStorage.getItem("todo"));
            this.í• ì¼.í• ì¼ìŠ¤ìœ„ì¹˜ = JSON.parse(localStorage.getItem("todoSwitch"));
        }
        if (typeof localStorage.lineThrough !== "undefined") {
            this.í• ì¼.ë¼ì¸ì“°ë£¨ = JSON.parse(localStorage.getItem("lineThrough"));
        }
    } /* ë§ˆìš´í‹°ë“œ ëë‚˜ìš” */,

    watch: {  /* ì™“ì¹˜ ì‹œì‘ë¼ìš” */
        ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§() {
            if (this.ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ == true) {
                setTimeout(() => {
                    this.ì¸ì‚¬ë§ì‹œì‘ = false;
                }, 2200);
                setTimeout(() => {
                    this.ì‹œê³„ì‚¬ë¼ì§ = true;
                }, 1500);
            }
        },
        í• ì¼ì•Œë¦¼() {
            if (this.í• ì¼ì•Œë¦¼ == true) {
                setTimeout(() => {
                    this.í• ì¼ì•Œë¦¼ = false;
                }, 3000);
            }
        },
    } /* ì™“ì¹˜ ëë‚˜ìš” */,
};


</script>
<style>@import url("../assets/css/main.css");</style>