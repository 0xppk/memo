<template >
    <div class="back" :class="{ curtain: !ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ }"></div>
    <div id="wrap">

        <!-- ë¡œê·¸ì¸ UI -->
        <Login
            :ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§="ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§"
            @ì¸ì‚¬ë§="ë‹‰ë„¤ì„ê²½ê³ "
            @ë‹‰ë„¤ì„ë³€ê²½="ë‹‰ë„¤ì„ì¶”ê°€($event)"
        />

        <!-- ëª¨ë‹¬ì°½ UI -->
        <Modal
            :ì‚­ì œì¸ë±ìŠ¤="ì‚­ì œì¸ë±ìŠ¤"
            @ëª¨ë‹¬ì°½ë‹«ì•„ì¤˜="ëª¨ë‹¬ì°½ë‹«ê¸°"
            @ì‚­ì œí•´ì¤˜="ì‚­ì œí™•ì¸ë²„íŠ¼(ì‚­ì œì¸ë±ìŠ¤)"
            @ë¦¬ì…‹í•´ì¤˜="ë¦¬ì…‹í™•ì¸ë²„íŠ¼"
        />

        <!-- ìˆ¨ê¹€ë°” -->
        <Sidebar
            :ë‹‰ë„¤ì„ì¸í’‹="ë‹‰ë„¤ì„ì¸í’‹"
            :ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§="ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§"
            :ì¸ì‚¬ë§ì‹œì‘="ì¸ì‚¬ë§ì‹œì‘"
            :ì‹œê³„ì‚¬ë¼ì§="ì‹œê³„ì‚¬ë¼ì§"
            :í• ì¼ì•Œë¦¼="í• ì¼ì•Œë¦¼"
            :í• ì¼="í• ì¼"
            :í• ì¼ìŠ¤ìœ„ì¹˜="í• ì¼ìŠ¤ìœ„ì¹˜"
            :ë¼ì¸ì“°ë£¨="ë¼ì¸ì“°ë£¨"
            @í• ì¼ì‚­ì œ="í• ì¼ì‚­ì œë²„íŠ¼($event)"
            @ì´ˆê¸°í™”="ëª¨ë‹¬ì°½ì—´ê¸°"
            @ì •ë ¬="ì—­ìˆœì •ë ¬"
        />

        <!-- ë‹¤í¬ëª¨ë“œ ìŠ¤ìœ„ì¹˜ -->
        <DarkMode />

        <!-- ë©”ëª¨ ë³´ë“œ -->
        <Memo
            :ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§="ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§"
            :ë©”ëª¨="ë©”ëª¨"
            :í• ì¼="í• ì¼"
            @ë©”ëª¨ì…ë ¥="ë©”ëª¨ì¸í’‹ = $event"
            @ë©”ëª¨ì¶”ê°€="ë©”ëª¨ì¶”ê°€"
            @í• ì¼="í• ì¼ì¶”ê°€"
            @í• ì¼ì‚­ì œ="í• ì¼ì‚­ì œë²„íŠ¼($event)"
            @ìˆ˜ì •="ìˆ˜ì •($event)"
            @ë©”ëª¨ì‚­ì œ="
                ëª¨ë‹¬ì°½ì—´ê¸°($event);
                ì‚­ì œì¸ë±ìŠ¤ = $event"
        />

    </div>
</template>
<script>
// # Import êµ¬ì—­
import Sidebar from "./Sidebar.vue";
import Modal from "./Modal.vue";
import DarkMode from "./DarkMode.vue";
import Login from "./Login.vue";
import Memo from "./Memo.vue";

// # export êµ¬ì—­
export default {
    name: "Main",
    components: {
        Sidebar,
        Modal,
        DarkMode,
        Login,
        Memo,
    },

    data() {  /* ë°ì´í„° ì‹œì‘ë¼ìš” */
        return {
            ë‹‰ë„¤ì„ì¸í’‹: "",
            ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§: false,
            ì¸ì‚¬ë§ì‹œì‘: false,
            ë©”ëª¨ì¸í’‹: "",
            ë©”ëª¨: [],
            í• ì¼: ['í´ë¦­í•˜ë©´ ì¤„ì´ ê·¸ì–´ì ¸ìš”', 'ë¸Œë¼ìš°ì €ë¥¼ ë„ê±°ë‚˜ ìƒˆë¡œê³ ì¹¨ í•´ë„', 'ë‚´ìš©ì´ ìœ ì§€ë©ë‹ˆë‹¤', 'ì‚­ì œëŠ” ìˆ«ìë²„íŠ¼ í´ë¦­'],
            ë¡œì»¬ì €ì¥ì†Œ: [],
            í• ì¼ì €ì¥ì†Œ: [],
            ì‚­ì œì¸ë±ìŠ¤: null,
            í• ì¼ì•Œë¦¼: false,
            í• ì¼ìŠ¤ìœ„ì¹˜: [0, 0, 0, 0],
            ë¼ì¸ì“°ë£¨: [],
            ì‹œê³„ì‚¬ë¼ì§: false,
        };
    } /* ë°ì´í„° ëë‚˜ìš” */,

    methods: {  /* ë©”ì˜ë“œ ì‹œì‘ë¼ìš” */
        // # ë²„íŠ¼ í•¨ìˆ˜
        ë‹‰ë„¤ì„ì¶”ê°€(e) {
            this.ë‹‰ë„¤ì„ì¸í’‹ = e;
            localStorage.setItem("name", this.ë‹‰ë„¤ì„ì¸í’‹);
        },
        ë‹‰ë„¤ì„ê²½ê³ () {
            if (this.ë‹‰ë„¤ì„ì¸í’‹ !== "") {
                this.ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ = true;
                this.ì¸ì‚¬ë§ì‹œì‘ = true;
            } else {
                alert("ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ¤–ğŸ‘¾ğŸ’©ğŸ¤–");
            }
        },
        ë©”ëª¨ì¶”ê°€() {
            if (this.ë©”ëª¨ì¸í’‹ !== "") {
                this.ë©”ëª¨.push(this.ë©”ëª¨ì¸í’‹);
                this.ë©”ëª¨ì¸í’‹ = "";
                this.ë©”ëª¨ìŠ¤í† ë¦¬ì§€ì €ì¥();
            } else {
                alert("ê¸€ì¨ ì§œì‰­ì•„");
            }
        },
        í• ì¼ì¶”ê°€() {
            if (this.ë©”ëª¨ì¸í’‹ !== "") {
                this.í• ì¼.push(this.ë©”ëª¨ì¸í’‹);
                this.í• ì¼ìŠ¤ìœ„ì¹˜.push(0);
                this.ë¼ì¸ì“°ë£¨.push("none");
                this.í• ì¼ì•Œë¦¼ = true;
                this.ë©”ëª¨ì¸í’‹ = "";
                this.íˆ¬ë‘ìŠ¤í† ë¦¬ì§€ì €ì¥();
            } else {
                alert("ê¸€ ë‚¨ê²¨");
            }
        },
        ì‚­ì œí™•ì¸ë²„íŠ¼(i) {
            this.ë©”ëª¨.splice(i, 1);
            localStorage.setItem("memo", JSON.stringify(this.ë©”ëª¨));
            document.querySelector("#send").disabled = true;
            this.ëª¨ë‹¬ì°½ë‹«ê¸°();
        },
        í• ì¼ì‚­ì œë²„íŠ¼(êµ³) {
            this.í• ì¼.splice(êµ³, 1);
            this.í• ì¼ìŠ¤ìœ„ì¹˜.splice(êµ³, 1);
            this.ë¼ì¸ì“°ë£¨.splice(êµ³, 1);
            localStorage.setItem("todo", JSON.stringify(this.í• ì¼));
            localStorage.setItem("todoSwitch", JSON.stringify(this.í• ì¼ìŠ¤ìœ„ì¹˜));
            localStorage.setItem("lineThrough", JSON.stringify(this.ë¼ì¸ì“°ë£¨));
        },
        ë¦¬ì…‹í™•ì¸ë²„íŠ¼() {
            this.ëª¨ë‹¬ì°½ë‹«ê¸°();
            this.ë©”ëª¨ = [];
            this.í• ì¼ = [];
            this.í• ì¼ìŠ¤ìœ„ì¹˜ = [];
            this.ë¼ì¸ì“°ë£¨ = [];
            this.ë‹‰ë„¤ì„ì¸í’‹ = "";
            this.ì¸ì‚¬ë§ì‹œì‘ = false,
            this.ì‹œê³„ì‚¬ë¼ì§ = false,
            this.ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ = false,
            this.ìŠ¤í† ë¦¬ì§€ë¦¬ì…‹();
            document.querySelector(".square").classList.remove("square-hide");
        },
        ìˆ˜ì •(i) {
            var ìˆ˜ì •ì¸í’‹ = document.querySelectorAll("textarea")[i].value;
            this.ë©”ëª¨.splice(i, 1, ìˆ˜ì •ì¸í’‹);
            localStorage.setItem("memo", JSON.stringify(this.ë©”ëª¨));
        },

        // # ëª¨ë‹¬ì°½ í•¨ìˆ˜
        ëª¨ë‹¬ì°½ì—´ê¸°() {
            document.querySelector(".black-bg").classList.add("modal-show");
        },
        ëª¨ë‹¬ì°½ë‹«ê¸°() {
            document.querySelector(".black-bg").classList.remove("modal-show");
            setTimeout(() => {
                this.ì‚­ì œì¸ë±ìŠ¤ = null;
            }, 400);
        },

        // # í•„í„° í•¨ìˆ˜
        ì—­ìˆœì •ë ¬() {
            this.ë©”ëª¨.reverse();
            this.ë©”ëª¨ìŠ¤í† ë¦¬ì§€ì €ì¥();
        },

        // # ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í•¨ìˆ˜
        ë©”ëª¨ìŠ¤í† ë¦¬ì§€ì €ì¥() {
            var ì„ì‹œì €ì¥ì†Œ = JSON.stringify(this.ë©”ëª¨);
            localStorage.setItem("memo", ì„ì‹œì €ì¥ì†Œ);
        },
        íˆ¬ë‘ìŠ¤í† ë¦¬ì§€ì €ì¥() {
            localStorage.setItem("todo", JSON.stringify(this.í• ì¼));
            localStorage.setItem("todoSwitch", JSON.stringify(this.í• ì¼ìŠ¤ìœ„ì¹˜));
        },
        ìŠ¤í† ë¦¬ì§€ë¦¬ì…‹() {
            localStorage.clear();
        },
    } /* ë©”ì˜ë“œ ëë‚˜ìš” */,

    mounted() {  /* ë§ˆìš´í‹°ë“œ ì‹œì‘ë¼ìš” */
        // ì¬ì ‘í•  ë•Œë§ˆë‹¤ ë¡œì»¬ìŠ¤íŠ¸ë¦¬ì§€ì— ë‚¨ì€ ë°ì´í„°ë¥¼ ë‚´ ë°ì´í„° í†µìœ¼ë¡œ ê°€ì ¸ì˜´ (ì¼ì¢…ì˜ ë™ê¸°í™”)
        if (typeof localStorage.name !== "undefined") {
            this.ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ = true;
            this.ì¸ì‚¬ë§ì‹œì‘ = true;
            this.ë‹‰ë„¤ì„ì¸í’‹ = localStorage.getItem("name");
        }
        if (typeof localStorage.memo !== "undefined") {
            this.ë©”ëª¨ = JSON.parse(localStorage.getItem("memo"));
        }
        if (typeof localStorage.todo !== "undefined") {
            this.í• ì¼ = JSON.parse(localStorage.getItem("todo"));
            this.í• ì¼ìŠ¤ìœ„ì¹˜ = JSON.parse(localStorage.getItem("todoSwitch"));
        }
        if (typeof localStorage.lineThrough !== "undefined") {
            this.ë¼ì¸ì“°ë£¨ = JSON.parse(localStorage.getItem("lineThrough"));
        }
    } /* ë§ˆìš´í‹°ë“œ ëë‚˜ìš” */,

    watch: {  /* ì™“ì¹˜ ì‹œì‘ë¼ìš” */
        ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§() {
            if (this.ë‹‰ë„¤ì„ì¸í’‹ì‚¬ë¼ì§ == true) {
                setTimeout(() => {
                    this.ì¸ì‚¬ë§ì‹œì‘ = false;
                }, 2200);
                setTimeout(() => {
                    this.ì‹œê³„ì‚¬ë¼ì§ = true;
                }, 1500);
            }
        },
        í• ì¼ì•Œë¦¼() {
            if (this.í• ì¼ì•Œë¦¼ == true) {
                setTimeout(() => {
                    this.í• ì¼ì•Œë¦¼ = false;
                }, 3000);
            }
        },
    } /* ì™“ì¹˜ ëë‚˜ìš” */,
};
</script>
<style>@import url('../css/main.css');</style>